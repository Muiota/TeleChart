var TeleChart=function(w){var i="line",ac=12,U=25,G=1.5,Z=5,ao=1,aE=2,ak=3,r=4,N=5,Q=Math.pow(2,53)-1,A=-(Math.pow(2,53)-1),s=[2,5,10],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=2*Math.PI;var ay=document.getElementById(w),aT=window.parseInt,aL=ay.offsetWidth*G,k=ay.offsetHeight*G,ar=aT(aL*ac/100),aC=aL-ar-ar*2,M=ar/2,aD=aC+ar+Z*4,v=true,ag=av(aL,k,"m_"+w),aN=av(aL,k,"f_"+w),q=ag.getContext("2d"),D=aN.getContext("2d"),aI=null,j=[],V={},au,at,aO,aM,o=false,aB=false,c={start:0,end:0},W,aU,az,aV,g,f,af,p,P,O,ah,d,aJ,x,J=true;function al(){var aW=m("font-size"),aX=ag.style;D.lineJoin="round";x=aT(aT(aW.replace(/\D/g,""))*1.2);aW=x+"px";D.font=aW+" "+m("font-family");aJ=aK("XXX XX");aX.width=aT(aL/G)+"px";aX.height=aT(k/G)+"px"}al();function aS(aW){f=aW}function b(aW){O=aW}function am(){aI=null;j=[];h()}ay.appendChild(ag);function m(aW){var aX=document.body;if(aX.currentStyle){return aX.currentStyle[aW]}return document.defaultView.getComputedStyle(aX,null)[aW]}function av(aY,aW,aZ){var aX=document.createElement("canvas");aX.id="layer_"+aZ;aX.width=aY;aX.height=aW;return aX}function H(aY){var aX=new Date(aY);var aW=aX.getDate();var aZ=aX.getMonth();return u[aZ]+" "+aW}function Y(aW){ag.style.cursor=aW}function aw(){var aW=null;if(at>aD){aW=ao;var aZ=(W)*P;var a2=(aU)*P;var a3=aZ-au;var aX=a2-au;if(Math.abs(a3+Z)<Z){aW=aE}else{if(Math.abs(aX-Z)<Z){aW=ak}else{if(au>aZ&&au<a2){c.start=a3/P;c.end=aX/P;aW=r}else{if(at>aD+ar){for(var a1=0;a1<j.length;a1++){var aY=j[a1];aY.hovered=false;if(au>aY.bX&&au<aY.bX+aY.bW&&at>aY.bY&&at<aY.bY+aY.bH){aY.hovered=true;aW=N;break}}}}}}}if(o!==aW){o=aW;switch(o){case aE:case ak:Y("col-resize");break;case r:case N:Y("pointer");break;default:for(var a0=0;a0<j.length;a0++){j[a0].hovered=false}Y("inherit");break}}}function ax(aW){aW.preventDefault();aW.stopPropagation()}function ae(){var aY=au/P;var aZ=aI.data.length-2;if(aY<0){aY=0}else{if(aY>aZ){aY=aZ}}var aW=30/P;switch(o){case aE:if(aU-aY>aW){W=aY}B();break;case ak:if(aY-W>aW){aU=aY}B();break;case r:var a0=aY+c.start;var aX=aY+c.end;if(a0<0){a0=0;aX=c.end-c.start}if(aX>aZ){aX=aZ;a0=aZ-c.end+c.start}W=a0;aU=aX;B();break}}function t(aW){ax(aW);if(aB&&aW.buttons!==1){aB=false}au=aT((aW.clientX-aO)*G);at=aT((aW.clientY-aM)*G);if(!aB){aw()}else{ae()}h()}function an(aY,aX){ax(aY);aB=aX;if(aX){switch(o){case N:for(var aW=0;aW<j.length;aW++){if(j[aW].hovered){j[aW].enabled=!j[aW].enabled;X();B()}}break}}h()}ag.onmousemove=function(aW){t(aW)};ag.onmousedown=function(aW){an(aW,true)};ag.onmouseup=function(aW){an(aW,false)};function h(){v=true}function I(){var aW=ag.getBoundingClientRect();aO=aW.left;aM=aW.top;h()}window.addEventListener("scroll",function(aW){I()});window.addEventListener("resize",function(aW){I()});I();function a(){D.beginPath()}function K(aW){D.lineWidth=aW}function aQ(){D.stroke()}function aK(aW){return D.measureText(aW).width}function F(aX,aW,aY){D.fillText(aX,aW,aY)}function R(aX,aZ){if(aX.indexOf("#")!==-1){var aY=aX.length===7?/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i:/^#?([a-f\d])([a-f\d])([a-f\d])$/i;var aW=aY.exec(aX);aX="rgb("+aT(aW[1],16)+","+aT(aW[2],16)+","+aT(aW[3],16)+")"}if(aX.indexOf("a")===-1){return aX.replace(")",", "+aZ+")").replace("rgb","rgba")}return aX}function aF(aX){var aY=aC+M;a();aA(R(aX,0.1));K(1);var aZ=aY;while(aZ>M){var aW=aT(aZ)+0.5;aH(true,0,aW);aH(false,aL,aW);aZ=aZ+d*f}aQ();return aZ}function C(a3,aX){var a1=aC+M;var a8=R(a3,0.4);K(1);aj(a8);var aY=az,a7=aT(Math.ceil((aV-az)/6));for(var a2=az;a2<=aV;a2++){var aZ=(a2-az)*g;if(aY<=a2){var ba=H(aI.data[a2]);F(ba,aZ,a1+Z*5);aY=aY+a7}}var a6=0;var a0=a1;var aW=R(aX,0.7);while(a0>M){var a9=aT(a0)+0.5-Z;var a5=a6.toString();var a4=aK(a5);aj(aW);aq(Z/2,a9-x+2,a4+Z*2,x);aj(a8);F(a5,Z,a9);a6=aT(a6+d);a0=a0+d*f}}function aH(aX,aW,aY){if(aX){D.moveTo(aW,aY)}else{D.lineTo(aW,aY)}}function aR(aY,aX,aW,aZ){D.quadraticCurveTo(aY,aX,aW,aZ)}function ai(){D.closePath()}function z(){D.fill()}function aP(aX,a1,aW,aZ,aY,a0){D.arc(aX,a1,aW,aZ,aY,a0)}function aq(aW,aZ,aX,aY){D.fillRect(aW,aZ,aX,aY)}function aA(aW){D.strokeStyle=aW}function aj(aW){D.fillStyle=aW}function n(aW,aX){D.translate(aW,aX)}function T(a3,a2,aY,a4,a5,a0,aZ,aX,a1){a();aA(R(a5,0.2));K(1);var aW=20;aH(true,a3+aW,a2);aH(false,a3+aY-aW,a2);aR(a3+aY,a2,a3+aY,a2+aW);aR(a3+aY,a2+a4,a3+aY-aW,a2+a4);aH(false,a3+aW,a2+a4);aR(a3,a2+a4,a3,a2+a4-aW);aR(a3,a2,a3+aW,a2);ai();aQ();aj(aZ);a();aP(a3+aW,a2+aW,14,0,e);z();aA(a0);K(4);a();n(-2,4);aH(true,a3+aW-Z,a2+aW-Z);aH(false,a3+aW,a2+aW);aH(false,a3+aW+Z*1.8,a2+aW-Z*1.8);n(2,-4);aQ();if(!a1){a();aj(a0);aP(a3+aW,a2+aW,12,0,e);z()}aj(a5);F(aX,a3+aW*2+Z,a2+aW+x/2-Z+2)}function aa(aX,aW){for(var aZ=0;aZ<j.length;aZ++){var aY=j[aZ];T(aY.bX,aY.bY,aY.bW,aY.bH,aX,aW,aY.color,aY.name,aY.enabled)}}function y(){D.clearRect(0,0,aL,k);if(aI&&j&&j.length){var a4=aI;var a9=(W)*P;var aX=(aU)*P;var aW=m("color");var a8=m("background-color");var bb=false;aj(R(aW,0.3));aq(a9,aD,aX-a9,ar);aj(a8);aq(a9+Z*2,aD+Z/2,aX-a9-Z*4,ar-Z);aF(aW);var aZ=aC+M;for(var a3=0;a3<j.length;a3++){var a2=j[a3];if(!a2.enabled){continue}a();K(2);aA(a2.color);var a7=a4.data.length;for(var a0=1;a0<a7;a0++){var ba=(a0-1)*P;var aY=aD+ar+(a2.data[a0]-ah)*O;aH(a0===1,ba,aY)}aQ();a();K(3);for(var a1=az;a1<=aV;a1++){var a6=(a1-az)*g;var a5=aZ+(a2.data[a1]-af)*f;aH(a1===az,a6,a5)}aQ();bb=true}aj(R(aW,0.1));aq(0,aD,a9,ar);aq(aX,aD,aL-aX,ar);aj(R(a8,0.5));aq(0,aD,a9,ar);aq(aX,aD,aL-aX,ar);if(bb){C(aW,a8)}aa(aW,a8);q.clearRect(0,0,aL,k);q.drawImage(aN,0,0,aL,k)}}function ad(aX,aZ,aY,aW){V[aZ.name]={f:aX,c:aZ,p:aY,s:aW||5}}function X(){P=(aL)/(aI.data.length-2);var aW=J?0:A;var aY=Q;for(var aZ=0;aZ<j.length;aZ++){var aX=j[aZ];if(!aX.enabled){continue}if(aX.max>aW){aW=aX.max}if(aX.min<aY){aY=aX.min}}ah=aY+1;ad(O,b,-(ar-2)/(aW-aY))}function E(){var aY=Math.ceil((p-af)/6),aW=aY/25,aZ=0,a1=1,a0,aX;do{if(aZ>=s.length){aZ=0;a1=a1*10}aX=s[aZ]*a1;a0=Math.ceil(aY/aX)*aX;aZ++}while(a0-aY<aW);d=a0}function B(){az=aT(W+1);aV=aT(aU+1);g=aL/(aV-az);var aW=A;var aZ=J?0:Q;for(var a1=0;a1<j.length;a1++){var aY=j[a1];if(!aY.enabled){continue}for(var a0=az;a0<=aV;a0++){var aX=aY.data[a0];if(aX>aW){aW=aX}if(aX<aZ){aZ=aX}}}af=aZ;p=aW;ad(f,aS,-(aC-2)/(aW-aZ));E()}function l(){var aZ=Z,aX=aD+ar+Z*6,a0=40;for(var a1=0;a1<j.length;a1++){var aY=j[a1],aW=40+Z*4+aK(aY.name);if(aZ+aW>aL){aZ=Z;aX=aX+a0+Z*3}aY.bX=aZ;aY.bY=aX;aY.bW=aW;aY.bH=a0;console.log(aY);aZ=aZ+aW+Z*3}}function aG(aW){if(!aW){return}var aZ=aW.columns;if(aZ){for(var a0=0;a0<aZ.length;a0++){var a4=aZ[a0];var aX=a4.length;var a5=A;var a2=Q;for(var aY=1;aY<aX;aY++){var a3=a4[aY];if(a3>a5){a5=a3}if(a3<a2){a2=a3}}if(a4[0]==="x"){aI={data:a4,min:a2,max:a5};aU=(aX-2);W=aU-(aU)*U/100}else{j.push({alias:a4[0],data:a4,type:i,name:a4[0],min:a2,max:a5,enabled:true})}}X();B();l()}function a1(ba,bb){if(ba){for(var a8 in ba){if(ba.hasOwnProperty(a8)){var a7=ba[a8];for(var a9=0;a9<j.length;a9++){var a6=j[a9];if(a6.alias===a8){a6[bb]=a7}}}}}}a1(aW.types,"type");a1(aW.colors,"color");a1(aW.names,"name")}function ap(aW){if(aW){aG(aW);h()}}function S(){for(var aW in V){if(V.hasOwnProperty(aW)){var aX=V[aW];if(aX){if(!aX.factor){aX.factor=(aX.p-aX.f)/aX.s}aX.f=aX.f+aX.factor;if(aX.factor!==0&&Math.abs(aX.f-aX.p)>Math.abs(aX.factor*2)){aX.c(aX.f);h()}else{aX.c(aX.p);delete V[aW];h()}}}}}function ab(){S();if(v){v=false;y()}requestAnimationFrame(ab)}ab();return{draw:ap,invalidate:h,clear:am}};